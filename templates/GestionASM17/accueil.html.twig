{#GestionASM17/templates/GestionASM17/accueil.html.twig #}
{% extends 'base.html.twig' %}
{% block body%}
{# Div1 qui contient l'ensemble de la page #}
<div class="table-responsive">
<h3>Physionomie de l'association :</h3>
{# Div2 qui contient les deux tableaux : membres/donateurs et recettes/depenses #}
  <div class="row">
{# Div3 qui contient les deux tableaux : membres/donateurs et recettes/depenses pour le respponsive design  #}
    <div class=" col-lg-5 col-sm-5">
{# Div4 qui contient le tableau membres/donateurs #}
      <table class="table table-bordered table-striped">
        <tbody> 
          <thead class="thead-dark">
            <tr >
              <th  style="text-align:center;">MEMBRES</th>
              <th  style="text-align:center;">DONATEURS</th>
            </tr>
          </thead>
          <tr>
            <td style="text-align:center;">
              <button type="button" class="btn-lg btn-basic btn-block">
                Total :
                <span class="badge badge-light">{{NbreMembre}}</span>
              </button>
            </td>
            <td colspan="2" style="text-align:center;">
              <button type="button" class="btn-lg btn-basic btn-block">
                Total :
                <span class="badge badge-light">{{NbreDonateur}}</span>
              </button>
            </td>
              </tr>
          <tr>
            <td style="text-align:center;">
              <button type="button" class="btn-lg btn-success btn-block">
              A jour  :
              <span class="badge badge-light">{{NbreMembreOkCoti}}</span>
              </button>
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">
              <button type="button" class="btn-lg btn-danger btn-block">
                Non à Jour :
                <span class="badge badge-light">{{NbreMembreNokCoti}}</span>
              </button>
            </td>
          </tr>
        </tbody>        
      </table>
    </div>{# Fin DIV4 #}
{# Tableau récupérant les Recettes et les Dépenses depuis la base de données #}
{# DIV5 qui contient le tableau recettes/depenses #}
  <div class="col-lg-6 col-sm-6 offset-lg-1 offset-sm-1">
    <table class="table table-bordered table-striped">
      <tbody>
        <thead class="thead-dark">
          <tr >
            <th colspan="4" style="text-align:center;">RECETTES</th>
            <th style="text-align:center;">DEPENSES</th>
          </tr>
        </thead>
          <tr>
            <td colspan="4">
            {% for somme in TotalRecette %}       
              <button type="button" class="btn-lg btn-basic btn-block">
                Total :
                <span class="badge badge-light">{{somme.resultat}} €</span>
              </button>
            {% endfor %}
            </td>
            <td>
              <button type="button" class="btn-lg btn-basic btn-block">
                Total :
                <span class="badge badge-light">{{TotalDepense}} €</span>
              </button>
            </td>
          </tr>
          <tr>
            <td style="text-align:center;">Cotisations</td>
            <td style="text-align:center;">Dons</td>
            <td style="text-align:center;">Recettes</td>
            <td style="text-align:center;">Subventions</td>
          </tr>
            <tr>
            {% for typeRecette in SommeParTypeDeRecette %}
              <td>             
                <button type="button" class="btn-lg btn-basic btn-block">
                  <span class="badge badge-light">{{typeRecette.resultat}} €</span>
                </button>
              </td>
              {% endfor %}
            </tr>
        </tbody>        
      </table>
  </div> {# Fin DIV5 #}
  </div> {# Fin DIV3 #}
</div> {# Fin DIV2 #}

<br>
<br>
{# Partie contenant les anniverssaires à venir #}
{# DIV6 qui contient le tableau des anniverssaires à venir #}
<div clas="table-responsive">
  <h3>Anniversaires à venir :</h3>
     <table class="table table-bordered table-striped table-hover">
      <tbody>
        <thead class="thead-dark">
          <tr>
            <th style="text-align:center;">COTI.</th>
            <th style="text-align:center;">DATE DE NAISSANCE</th>
            <th style="text-align:center;">AGE</th>
            <th style="text-align:center;">PRENOM ET NOM</th>
            <th style="text-align:center;">ADRESSE</th>
            <th style="text-align:center;">CP</th>
            <th style="text-align:center;">VILLE</th>
          </tr>
        </thead>
         {% for smith in ListeMembreTableauAnnivSmith %}                
            <tr>
          {% if smith.coti_ok %}
              <td align="center">
                <button type="button" class="btn-lg btn-success"></button>
              </td>
              {% else %}
              <td align="center">
                <button type="button" class="btn-lg btn-danger"></button>
              </td>
          {% endif %}
              <td style="text-align:center;">{{smith.date_naissance_smith|date('d/m/Y')}}</td>
              <td style="text-align:center;">	{{ ('now'|date('Y') - smith.date_naissance_smith|date('Y') - 1) + ('now'|date('2010-m-d')|date('U') - smith.date_naissance_smith|date('2010-m-d')|date('U') >= 0 ? 1 : 0) }} ANS</td>
              <td style="text-align:center;">{{smith.prenom_smith}} {{smith.nom_membre|upper}}</td>
              <td style="text-align:center;">{{smith.ligne_adr2}} {{smith.ligne_adr3}}</td>
              <td style="text-align:center;">{{smith.code_postal}}</td>
              <td style="text-align:center;">{{smith.ville}}</td>  
            </tr> 
        {% endfor %}
      </tbody>        
    </table>
  <br>
</div> {# Fin DIV6 #}
</div> {# Fin DIV1 #}
             
{% endblock %}
          
